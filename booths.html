<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS FILES -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-icons.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <title>Booth Booking - The People Dialogue Festival</title>

    <!-- Basic Meta Tags -->
    <meta name="description" content="Book your booth at The People Dialogue Festival. Reserve your spot today!">
    <meta name="keywords" content="Booth Booking, PDF, Festival, Exhibition, Reserve">
    <meta name="author" content="The People Dialogue Festival">

    <!-- Social Media Meta Tags -->
    <meta property="og:title" content="Booth Booking - The People Dialogue Festival">
    <meta property="og:description" content="Book your booth at The People Dialogue Festival. Reserve your spot today!">
    <meta property="og:image" content="images/sharing-image.jpg">
    <meta property="og:url" content="https://www.peopledialoguefestival.org">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Booth Booking - The People Dialogue Festival">
    <meta name="twitter:description" content="Book your booth at The People Dialogue Festival. Reserve your spot today!">
    <meta name="twitter:image" content="images/sharing-image.jpg">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.svg">

    <!-- Custom CSS for Booth Booking -->
    <style>
        /* Booth Layout */
        .booth-layout {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            
        }

        /* Booths */
        .booth {
            width: 75px;
            height: 75px;
            background-color: #e0e0e0;
            border: 2px solid #ccc;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.3s ease-in-out;
            position: relative;
        }
        .booth::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .booth:hover::after {
            opacity: 1;
        }

        /* Booth States */
        .booth.open {
            background-color: #e0e0e0;
            border-color: #ccc;
            color: #333;
        }
        .booth.selected {
            background-color: #4caf50;
            border-color: #388e3c;
            color: #fff;
        }
        .booth.reserved {
            background-color: rgba(35, 36, 37, 0.69);
            border-color: rgba(35, 36, 37, 0.69);
            color: #fff;
            pointer-events: none;
        }
        .booth.declared_interest {
            background-color: #ff9800;
            border-color: #f57c00;
            color: #fff;
            pointer-events: none;
        }

        /* Button */
        #confirmBtn {
            margin-top: 25px;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            background-color: #2196f3;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease-in-out;
        }
        #confirmBtn:hover {
            background-color: #1976d2;
            transform: scale(1.05);
        }

        /* Reset Button */
        #resetBtn {
            margin-top: 15px;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: bold;
            background-color: #f44336;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease-in-out;
        }
        #resetBtn:hover {
            background-color: #d32f2f;
            transform: scale(1.05);
        }

        /* Sweet Message */
        .message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #ffeb3b;
            color: #333;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            animation: fadeInOut 3s ease-in-out;
        }
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            10%, 90% { opacity: 1; }
        }

        /* Color Key */
        .color-key {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        .color-key-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .color-key-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        .color-key-box.open { background-color: #e0e0e0; }
        .color-key-box.selected { background-color: #4caf50; }
        .color-key-box.reserved { background-color:rgba(35, 36, 37, 0.69); }
        
    </style>
</head>

<body id="section_1">

    <nav class="navbar navbar-expand-lg shadow-lg">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="images/PDF Logo.svg" class="logo img-fluid" alt="PDF Logo">
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#welcome_section">Home</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link click-scroll" href="index.html#village_section">Villages</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                    <li class="nav-item ms-3">
                        <a class="nav-link custom-btn custom-border-btn btn" href="enroll.html" target="_blank">REGISTER TODAY</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <main>
        <section class="contact-section section-padding" id="section_6">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-12 mx-auto">
                        <h2 class="text-center mb-4">Booth Booking </h2>
                        <p class="text-center mb-4">Select a booth and click "Inquire" to inquire on the booths availability. After clicking, an email will pop up with your selected booths, and we will get back to you about availability.</p>

                        <!-- Color Key -->
                        <div class="color-key mb-4">
                            <div class="color-key-item">
                                <div class="color-key-box open"></div>
                                <span>Open</span>
                            </div>
                            
                            <div class="color-key-item">
                                <div class="color-key-box reserved"></div>
                                <span>Reserved</span>
                            </div>
                            
                        </div>

                        <!-- Booth Layout -->
                        <div class="booth-layout" id="boothGrid"></div>

                        <!-- Buttons -->
                        <div class="text-center mt-4">
                            <button id="confirmBtn" class="me-2">Inquire</button>
                            <button id="resetBtn">Reset Selected Booths</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="site-footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-5 col-12 d-flex flex-column flex-md-row justify-content-center align-items-center mx-auto text-center text-md-start">
                        <p class="copyright-text mb-1 mb-md-0">
                            Copyright © <span id="currentYear"></span> PDF
                        </p>
                        <p class="copyright-text mb-0">
                            Site Made with ❤️ by
                            <a href="https://mathengeinc.com" target="_blank">MathengeInc.</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JAVASCRIPT FILES -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/click-scroll.js"></script>
    <script src="js/counter.js"></script>
    <script src="js/custom.js"></script>
    <script src="js/faq.js"></script>

    <!-- Booth Booking Script -->
    <script>
        const boothGrid = document.getElementById("boothGrid");
        const confirmBtn = document.getElementById("confirmBtn");
        const resetBtn = document.getElementById("resetBtn");
        let selectedBooths = [];
        let boothData = [];

        // Fetch booth data from the JSON file
        async function fetchBoothData() {
            const response = await fetch("booths.json");
            const data = await response.json();
            return data.booths;
        }

        // Create booths dynamically based on the fetched data
        async function createBooths() {
            boothData = await fetchBoothData();
            boothGrid.innerHTML = "";

            boothData.forEach((booth) => {
                const boothElement = document.createElement("div");
                boothElement.classList.add("booth", booth.status);
                boothElement.textContent = booth.id;

                // Add click event listener for selecting booths
                if (booth.status === "open") {
                    boothElement.addEventListener("click", () => selectBooth(boothElement, booth.id));
                } else if (booth.status === "reserved") {
                    boothElement.addEventListener("click", () => showMessage("Oops! This booth is already reserved. Please pick another one."));
                }

                boothGrid.appendChild(boothElement);
            });
        }

        // Select or deselect a booth
        function selectBooth(booth, id) {
            if (booth.classList.contains("selected")) {
                booth.classList.remove("selected");
                selectedBooths = selectedBooths.filter((b) => b !== id);
            } else {
                booth.classList.add("selected");
                selectedBooths.push(id);
            }
        }

        // Show a sweet message
        function showMessage(message) {
            const messageElement = document.createElement("div");
            messageElement.classList.add("message");
            messageElement.textContent = message;
            document.body.appendChild(messageElement);
            setTimeout(() => messageElement.remove(), 3000);
        }

        // Confirm booking (declare interest)
        confirmBtn.addEventListener("click", async () => {
            if (selectedBooths.length === 0) {
                showMessage("Please select at least one booth.");
                return;
            }

            // Update booth status to "declared_interest"
            boothData = boothData.map((booth) => {
                if (selectedBooths.includes(booth.id)) {
                    return { ...booth, status: "declared_interest" };
                }
                return booth;
            });

            // Simulate saving updated booth data (in a real app, send to server)
            localStorage.setItem("boothData", JSON.stringify(boothData));

            // Open mailto link
            const subject = "Availability of Selected Booths";
            const body = `Hello,\n\nI am interested in the following booths: ${selectedBooths.join(", ")}.\n\nPlease let me know if they are available.\n\nRegards,\n[Your Name]`;
            window.location.href = `mailto:hilda@cmd-kenya.org?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

            // Clear selected booths and refresh UI
            selectedBooths = [];
            createBooths();
            showMessage("Interest declared successfully! An email will pop up with your selected booths.");
        });

        // Reset selected booths
        resetBtn.addEventListener("click", () => {
            selectedBooths = [];
            createBooths();
            showMessage("Selected booths have been reset.");
        });

        // Initialize the booths on page load
        createBooths();
    </script>

</body>

</html>